---
title: "[Log4shell] Log4j 취약점 분석 - 1편 "
categories:
  - Log4shell
tags:
  - Log4j
  - Log4shell
  - jndi
  - LDAP
  - CVE
toc: true
toc_sticky: true
toc_label: "Log4j 취약점 분석"
toc_icon: "bookmark"
author_profile: true
---

💡 본 포스팅에서는 2021-12-10일에 발견된 log4j 보안 취약점에 대해서 살펴보겠습니다. 
{: .notice--warning}

# [00]Log4j란? 
![image](https://user-images.githubusercontent.com/33647663/148392576-72eeac9f-2438-4ba4-a51c-2575d8ec626a.jpg)


>  2021-12-10에 발견된 **log4shell** 은 Apache Log4j 2유틸리티의 여러 버전에 영향을 미치는 심각도가 높은 취약점(CVE-2021-4428, CVSSv3 10.0) 입니다. 현재 이 취약점은 Log4j2의 여러 버전에 영향을 미치고 있습니다.

> 이 취약점이 위험한 이유는 첫째로, 피해가 광범위 하기 때문입니다. 많은 Java로 개발된 어플리케이션들은 대부분 영향을 받으며, 오픈소스 특성상 서로 **종속**되어 있기 때문에 쉽게 패치를 진행하기가 어렵습니다. 두번째로, 이 취약점은 인증되지 않은 **원격 코드 실행**(RCE: Remote Code Execution)이 가능하기 때문입니다. 마지막으로 공격자들이 어렵지 않게 해당 취약점을 이용할 수 있다는 것입니다. 


<br>
## 영향을 받는 버전
 - CVE-2021-44228 (원격 코드 실행 취약점)
    - 2.0-beta9 ~ 2.14.1 버전 
      - Log4j 2.3.1, 2.12.2, 2.12.3 및 이후 버전 제외
   
- CVE-2021-45046 (서비스 거부 취약점)
  - 2.0-beta9 ~ 2.15.0 버전
    - Log4j 2.3.1, 2.12.2, 2.12.3 및 이후 버전 제외

- CVE-2021-4104 (원격 코드 실행 취약점)
  - 1.x 버전
    - JMSAppender를 사용하지 않는 경우 취약점 영향 없음



# [01] Log4j 원리
log4j 취약점이 발생된 원인은 log4j가 로그를 출력할 때 로그에 사용자ID

## [JNDI]

## [LDAP]

## [공격 방식]


# [02] Log4j PoC 분석

## [Vulnerable App]

## [Exploit code]

# [03] 결론


# Reference
- https://www.fastly.com/blog/digging-deeper-into-log4shell-0day-rce-exploit-found-in-log4j
- https://www.randori.com/blog/cve-2021-44228/
- https://www.hahwul.com/2021/12/11/log4shell-internet-is-on-fire/

🔔 **포스팅 공지** <br><br>
현재 작성한 포스팅은 **깃 블로그 지킬 minimal mistakes**과 관련된 종합 내용입니다.<br>
<br>
A to Z 카테고리는 지금까지 진행할 포스팅을 확인하기 편하게 순서대로 정리한 글입니다.<br>
각각의 포스터에서 조금 더 자세한 설명과 팁 등이 적혀있으니 참조해주세요.<br>
{: .notice--success}