---
title: "[webhacking.kr] 54ë²ˆ ë¬¸ì œ í’€ì´[Javascript]"
categories:
  - webhacking
tags:
  - webhacking.kr
  - wargame
  - javascript
toc: true
toc_sticky: true
toc_label: "54ë²ˆ ë¬¸ì œ í’€ì´"
toc_icon: "bookmark"
author_profile: true
header:
  teaser: /assets/images/webhacking.jpg
---

ğŸ’¡ Webhacking.kr challenge(old) 54ë²ˆ ë¬¸ì œì— ëŒ€í•œ í’€ì´ì…ë‹ˆë‹¤.
{: .notice--warning}

# ë¬¸ì œ
  ![image](https://user-images.githubusercontent.com/33647663/153235184-4a28b984-207c-4e68-8904-65fdd90fde44.png)



  ```javascript
function run(){
  if(window.ActiveXObject){
   try {
    return new ActiveXObject('Msxml2.XMLHTTP');
   } catch (e) {
    try {
     return new ActiveXObject('Microsoft.XMLHTTP');
    } catch (e) {
     return null;
    }
   }
  }else if(window.XMLHttpRequest){
   return new XMLHttpRequest();
 
  }else{
   return null;
  }
 }
x=run();  
function answer(i){
  x.open('GET','?m='+i,false);
  x.send(null);
  aview.innerHTML=x.responseText;
  i++;
  if(x.responseText) setTimeout("answer("+i+")",20);
  if(x.responseText=="") aview.innerHTML="?";
}
setTimeout("answer(0)",1000);
  ```


# ë¬¸ì œ í’€ì´
  í™”ë©´ì— ì¶œë ¥ë˜ëŠ” ë¬¸ìë“¤ì„ ë‹¤ ëª¨ìœ¼ë©´ ë˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. javascript ì½”ë“œë¥¼ ë¶„ì„í•´ ë³´ê² ìŠµë‹ˆë‹¤. ìš°ì„  run í•¨ìˆ˜ëŠ” ë¸Œë¼ìš°ì €ê°„ì˜ í˜¸í™˜ì„±ì„ ìœ„í•´ì„œ ActiveXObjectì˜ ê²½ìš°ë„ ë™ì‘í•˜ë„ë¡ í•´ì¤€ê±´ë°, í˜„ì¬ ìƒí•­ê³¼ëŠ” ë§ì§€ ì•ŠëŠ” ì½”ë“œì…ë‹ˆë‹¤. [ë‹¤ìŒ ê¸€](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=redeyeant&logNo=100057590653)ì€ 2008ë…„ì— ì‘ì„±ëœ ê¸€ì¸ë° í•´ë‹¹ ì‹œì ì—ì„œ ì´ë ‡ê²Œ ì‘ì„±ë˜ëŠ” ì´ìœ ëŠ” XHRì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ê°€ ì¡´ì¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë¼ê³  í•©ë‹ˆë‹¤. XHRì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ê±°ì˜ ì—†ë‹¤ê³  í–ˆìœ¼ë‹ˆ, run()í•¨ìˆ˜ì˜ ë¦¬í„´ ê°’ì€ new XMLHttpRequest()ë¼ê³  ë³´ë©´ ë©ë‹ˆë‹¤.

```javascript
function run(){
  if(window.ActiveXObject){
   try {
    return new ActiveXObject('Msxml2.XMLHTTP');
   } catch (e) {
    try {
     return new ActiveXObject('Microsoft.XMLHTTP');
    } catch (e) {
     return null;
    }
   }
  }else if(window.XMLHttpRequest){
   return new XMLHttpRequest(); //ì‹¤ì œë¡œ ë¦¬í„´ë˜ëŠ” ê°’
 
  }else{
   return null;
  }
 }
```

ê·¸ ë‹¤ìŒì€ answer í•¨ìˆ˜ ì…ë‹ˆë‹¤. XMLHttpRequest ê°ì²´ë¥¼ í†µí•´ì„œ í˜¸ì¶œì„ í•˜ê³  ìˆìœ¼ë©° ê·¸ ê²°ê³¼ ê°’ì„ aview ê°ì²´ì— ì“°ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ië¥¼ ì¦ê°€ì‹œí‚¤ê³  ë‹¤ì‹œ í•œë²ˆ ì¬ê·€ì ìœ¼ë¡œ answerë¥¼ í˜¸ì¶œì‹œí‚¤ë‹¤ê°€ ì‘ë‹µê°’ì´ ì—†ì„ë•Œ ? ë¥¼ ì¶œë ¥í•˜ê³  ëë‚´ëŠ” ë¡œì§ì…ë‹ˆë‹¤.

```javascript
function answer(i){
  x.open('GET','?m='+i,false);
  x.send(null);
  aview.innerHTML=x.responseText;
  i++;
  if(x.responseText) setTimeout("answer("+i+")",20);
  if(x.responseText=="") aview.innerHTML="?";
}
setTimeout("answer(0)",1000);
```

XMLHttpRequestì—ì„œ ì‚¬ìš©ëœ í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

**void open(method,url,asynch,username,password)** : XHR ìš”ì²­ì„ ì´ˆê¸°í™” í•´ì£¼ëŠ” ì„¤ì •ì…ë‹ˆë‹¤. asynch ê°€ false ë¡œ ì„¤ì •ë˜ë©´ ë™ê¸°ë¡œ ì²˜ë¦¬ë˜ì–´, í•˜ë‚˜ì˜ ìš”ì²­ì„ ë³´ë‚´ê³  ëŒ€ìƒìœ¼ë¡œë¶€í„° ì‘ë‹µì´ ë„ì°©í•´ì•¼ ë‹¤ìŒì˜ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. method,url ê°’ì„ í•„ìˆ˜ê³ , ë‚˜ë¨¸ì§€ ì˜µì…˜ì€ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.

**void send(content)**: ì‹¤ì§ˆì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. ë¹„ë™ê¸°ë¼ë©´ ë°”ë¡œ ë¦¬í„´ì´ ë˜ê³ , ë™ê¸°ë¼ë©´ ëŒ€ìƒìœ¼ë¡œ ë¶€í„° ì‘ë‹µì„ ë°›ì„ ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. contentë¡œ ê°’ì„ ë„˜ê¸°ë ¤ë©´ openì—ì„œ POSTë¡œ ì„¤ì •í•´ì¤˜ì•¼ í•˜ë©°, contentëŠ” http bodyë¡œ ë„˜ì–´ê°€ê²Œ ë©ë‹ˆë‹¤. GETìœ¼ë¡œ openì„ í•´ì¤¬ë‹¤ë©´, contentì—ëŠ” nullì„ ì ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.

**responseText** : XHR ê°ì²´ì˜ sendì— ëŒ€í•œ ì‘ë‹µ ê°’ì„ ë¬¸ìì—´ë¡œ ë°˜í™˜í•´ ì¤ë‹ˆë‹¤.

ì½”ë“œê°€ ëŒì•„ê°€ëŠ” ë¡œì§ì€ ëŒ€ì¶© ì•Œì•˜ìœ¼ë‹ˆ, ì´ì œ ì¶œë ¥ë˜ëŠ” ê°’ë“¤ì„ ëª¨ì•„ì£¼ë©´ ë©ë‹ˆë‹¤. ê°ê°ì˜ ì¶œë ¥ê°’ì´ í˜„ì¬ aview.innerHTMLì— ë®ì–´ ì¨ì§€ê¸° ë•Œë¬¸ì— ì´ì „ì˜ ê¸€ìê°€ ì‚¬ë¼ì§€ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¿”ì¤Œìœ¼ë¡œì¨ ë®ì–´ì“°ëŠ”ê²Œ ì•„ë‹Œ, ì´ì–´ì“°ê²Œ í•´ì¤ë‹ˆë‹¤.ê·¸ë¦¬ê³  ë§ˆì§€ë§‰ì— ì‘ë‹µì´ ì—†ì„ë•Œ "?"ê°€ ì¨ì§€ë©´ ë‹¤ ì§€ì›Œì§€ë¯€ë¡œ ë§ˆì§€ë§‰ aview.innerHTML="?"ì€ ì‚­ì œí•´ ì¤ë‹ˆë‹¤.


```javascript
function answer(i){
  x.open('GET','?m='+i,false);
  x.send(null);
  aview.innerHTML+=x.responseText;  //ì´ì–´ì“°ê²Œ ë°”ê¿”ì£¼ê³ 
  i++;
  if(x.responseText) setTimeout("answer("+i+")",2);
  //if(x.responseText=="") aview.innerHTML="?";  ì´ë¶€ë¶„ ì‚­ì œ
}
setTimeout("answer(0)",1000);
```

![image](https://user-images.githubusercontent.com/33647663/153241719-75f118c3-c7bf-44f8-8fa0-7cfc95334a8f.png)

![image](https://user-images.githubusercontent.com/33647663/153241773-5e80ddcc-e05e-4e19-8677-ebe6f981821e.png)

