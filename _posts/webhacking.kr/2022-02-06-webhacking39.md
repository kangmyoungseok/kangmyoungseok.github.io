---
title: "[webhacking.kr] 39ë²ˆ ë¬¸ì œ í’€ì´[php,mysql]"
categories:
  - webhacking
tags:
  - webhacking.kr
  - wargame
toc: true
toc_sticky: true
toc_label: "39ë²ˆ ë¬¸ì œ í’€ì´"
toc_icon: "bookmark"
author_profile: true
---

ğŸ’¡ Webhacking.kr challenge(old) 39ë²ˆ ë¬¸ì œì— ëŒ€í•œ í’€ì´ì…ë‹ˆë‹¤.
{: .notice--warning}

# ë¬¸ì œ
  ![image](https://user-images.githubusercontent.com/33647663/152682841-bff24725-50cc-482a-a0d3-49d7d482acdb.png)

  ```php
<?php
  $db = dbconnect();
  if($_POST['id']){
    $_POST['id'] = str_replace("\\","",$_POST['id']);
    $_POST['id'] = str_replace("'","''",$_POST['id']);
    $_POST['id'] = substr($_POST['id'],0,15);
    $result = mysqli_fetch_array(mysqli_query($db,"select 1 from member where length(id)<14 and id='{$_POST['id']}"));
    if($result[0] == 1){
      solve(39);
    }
  }
?>
  ```

# ë¬¸ì œ í’€ì´
  sql ë¬¸ì„ ë¨¼ì € ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
  ```sql
  select 1 from member where length(id)<14 and id='{}
  ```

  ìœ„ì˜ ì¿¼ë¦¬ë¬¸ ì¤‘ì—ì„œ 1ì€ ì»¬ëŸ¼ ëª…ì´ ì•„ë‹™ë‹ˆë‹¤. member í…Œì´ë¸”ì—ì„œ where ì¡°ê±´ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” idê°€ ìˆë‹¤ë©´ 1ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. 

  ë‹¤ìŒì´ ê·¸ ì˜ˆì‹œì…ë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/33647663/152683040-a4a283a0-23cd-4b83-ac5d-3905bce70498.png)

  ë”°ë¼ì„œ ì…ë ¥ ê°’ì„ í†µí•´ì„œ ì¿¼ë¦¬ë¬¸ì„ ì™„ì„±ì‹œì¼œì„œ ì•„ë¬´ ë°ì´í„°ë“  ì¶œë ¥ì´ ë˜ê²Œ í•˜ë©´ë©ë‹ˆë‹¤.

  ê·¸ë¦¬ê³  ì£¼ì˜í•´ì•¼ í•  ê²ƒì´ sqlë¬¸ì˜ ë§ˆì§€ë§‰ ì¡°ê±´ì„ ë³´ë©´ ë§¨ ë§ˆì§€ë§‰ ì‘ì€ ë”°ì˜´í‘œê°€ í•˜ë‚˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ìµœì†Œí•œ í•˜ë‚˜ì˜ ```'```ê°€ ìˆì–´ì•¼ sqlë¬¸ì„ ì˜¤ë¥˜ ì—†ì´ ì™„ì„± ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

  ë¬¸ì œì˜ ì¡°ê±´ì„ ë³´ë©´ ```\``` ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ê³ , ```'```ëŠ” í•˜ë‚˜ë¥¼ 2ê°œë¡œ ë°”ê¿”ë²„ë¦¬ê¸° ë•Œë¬¸ì— ê²°êµ­ ```'```ëŠ” ê°€ì¥ ë§ˆì§€ë§‰ì— ê¼­ ì…ë ¥í•´ ì¤˜ì•¼ í•©ë‹ˆë‹¤.

  ê·¸ë¦¬ê³  ì´ ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•´ì„œ ì•Œì•„ì•¼ í•˜ëŠ” ì§€ì‹ì´ ìˆìŠµë‹ˆë‹¤. mysqlì—ì„œëŠ” ë‹¤ìŒì˜ ì¿¼ë¦¬ë¥¼ Trueë¡œ ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/33647663/152683234-684a0c38-2d8c-4b82-88f3-7240463db2ba.png)

  ì¦‰ mysql ì—ì„œëŠ” ë¬¸ìì—´ ë¹„êµë¥¼ í•  ë•Œ, ëì— ê³µë°±ì´ ì¶”ê°€ë¡œ ë¶™ë”ë¼ë„ ê°™ì€ ë¬¸ìë¡œ ì¸ì‹í•©ë‹ˆë‹¤.

  ì´ë¥¼ ì´ìš©í•˜ë©´ ë¬¸ì œì—ì„œ ê³µë°±(ë˜ëŠ” ë„ë¬¸ì)ì„ ì´ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  ```md
  admin         '  : ê³µë°± 9ê°œ
  ```

  ![image](https://user-images.githubusercontent.com/33647663/152683352-c3e8140e-57f6-4434-88dc-0f6151fa6756.png)

  ì¶”ê°€) ìœ„ì˜ í’€ì´ê°€ ì„±ê³µí•œë‹¤ëŠ” ëœ»ì€ memberí…Œì´ë¸”ì— id='admin'ì¸ ë°ì´í„°ê°€ ìˆë‹¤ëŠ” ëœ»ì´ë©°, ì¶”ê°€ë¡œ í•´ë´¤ì„ ë•Œ 'guest'ë¡œ í•´ë„ í’€ë ¸ìŠµë‹ˆë‹¤.

  ì¶”ê°€2) ë§Œì•½ ë‹¤ë¥¸ë¬¸ì œì—ì„œ ê³µë°±(%20)ì„ í•„í„°ë§ í•œë‹¤ë©´ null ë¬¸ìë¥¼ ì´ìš©í•´ì„œ ìš°íšŒë¥¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. nullë¬¸ìë¥¼ ì…ë ¥í•˜ê¸° ìœ„í•´ì„œëŠ” Post ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•ŒëŠ” ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì•ˆë˜ê³ , Burp Suiteë¥¼ ì´ìš©í•´ì„œ ìˆ˜ì •í•´ ì¤˜ì•¼ í•©ë‹ˆë‹¤.

  ![image](https://user-images.githubusercontent.com/33647663/152683497-8202dacd-5cce-464b-9842-4d66de4715fb.png)

  ![image](https://user-images.githubusercontent.com/33647663/152683510-a298c73a-8946-491f-9d16-f07f8ee884a9.png)

# Reference
  https://techblog.woowahan.com/2559/
