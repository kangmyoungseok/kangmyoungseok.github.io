---
title: "[LOS] 28ë²ˆ ë¬¸ì œ í’€ì´(phantom)"
categories:
  - los
tags:
  - los
  - rubiya
  - los 28ë²ˆ
  - los phantom
  
toc: true
toc_sticky: true
toc_label: "28ë²ˆ ë¬¸ì œ í’€ì´"
toc_icon: "bookmark"
author_profile: true
header:
  teaser: /assets/images/sql.png
---

ğŸ’¡ los.rubiya.kr 28ë²ˆ ë¬¸ì œì— ëŒ€í•œ í’€ì´ì…ë‹ˆë‹¤. 
{: .notice--warning}


# 28ë²ˆ(phantom)
## ë¬¸ì œ
![image](https://user-images.githubusercontent.com/33647663/160078321-2628f14f-36a9-408f-9061-d515394487ce.png)

## í’€ì´
joinmail ê°’ì— ë“¤ì–´ì˜¨ ê°’ì„ í†µí•´ì„œ emailì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë•Œ, joinmail ë³€ìˆ˜ì— í•„í„°ë§ì´ ì¶©ë¶„íˆ ê±¸ë ¤ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ìš°ì„  joinmailì— testê°’ì„ ë„£ìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ emailì— testê°’ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.


![image](https://user-images.githubusercontent.com/33647663/160078542-cae8003f-2849-4b11-a5c0-90f05d829725.png)

ì´ì œ insert ë¬¸ì„ ì¸ì ì…˜ í•˜ì—¬ ì›í•˜ëŠ” ê°’ì„ emailì— ì¶”ê°€ì ìœ¼ë¡œ ë„£ëŠ”ë‹¤ë©´ dbì— ìˆëŠ” ì •ë³´ë¥¼ ë¹¼ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë³¸ ë¬¸ì œì—ì„œëŠ” no=1ì— í•´ë‹¹í•˜ëŠ” emailì„ ì°¾ì•„ë‚´ë©´ í´ë¦¬ì–´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

ë‹¤ìŒê³¼ ê°™ì´ insert ë˜ëŠ” emailì˜ ë‚´ìš©ì„ prob_phantom í…Œì´ë¸”ì—ì„œ no=1ì¸ ì´ë©”ì¼ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ ë„£ìœ¼ë©´, no=1ì¸ ì´ë©”ì¼ ê°’ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` sql
insert into prob_phantom values(0,'58.122.121.25','test'),(0,'58.122.121.25',(select email from prob_phantom as t where no=1))%23')
```

ì´ë•Œ ì£¼ì˜í•  ì ì€ ìˆ˜ì •ì´ë‚˜ ì‚½ì…ì„ í•  í…Œì´ë¸” ë‚´ì—ì„œ, ì„œë¸Œ ì¿¼ë¦¬ë¡œ í•´ë‹¹ í…Œì´ë¸”ì˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ë•ŒëŠ” ìœ„ì˜ ì¿¼ë¦¬ë¬¸ ì²˜ëŸ¼ ë³„ì¹­ì„ ì´ìš©í•´ì„œ í…Œì´ë¸”ì„ ë¶ˆëŸ¬ì™€ì•¼ í•©ë‹ˆë‹¤.(as t)

ê·¸ë ‡ì§€ ì•Šê³  ë°”ë¡œ ë¶ˆëŸ¬ì˜¤ê²Œ ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë‚˜ì˜µë‹ˆë‹¤.


<as të¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ ì˜¤ë¥˜ê°€ ë‚œ ê²½ìš°>

![image](https://user-images.githubusercontent.com/33647663/160226854-728f250d-8d77-4c84-b04e-c82a3aca82b9.png)


<as të¥¼ ì‚¬ìš©í•´ì„œ ì„±ê³µì ìœ¼ë¡œ ì…ë ¥ì´ ëœ ê²½ìš°>

![image](https://user-images.githubusercontent.com/33647663/160226874-c80051c5-6b9c-4f51-89a5-a04dca19393a.png)


ê·¸ë˜ì„œ ìœ„ì˜ ì¿¼ë¦¬ë¥¼ í†µí•´ì„œ insert injectionì„ ìˆ˜í–‰í•˜ë©´, í…Œì´ë¸” ë‚´ì— ìˆëŠ” no=1ì˜ ì´ë©”ì¼ ê°’ì„ ì„±ê³µì ìœ¼ë¡œ ì•Œì•„ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/33647663/160226886-3dcbd257-26f9-4624-b1b8-3d1833350ad7.png)

email = admin_secure_email@rubiya.kr

![image](https://user-images.githubusercontent.com/33647663/160227027-50c64204-c52d-49a6-a64d-03cd3e36ed43.png)
